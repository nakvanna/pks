(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{ZfvG:function(t,e,a){"use strict";a.r(e);var s=a("o0o1"),n=a.n(s),i=a("w48C"),o=a.n(i),r=(a("K+Wz"),a("rdXg")),c=a.n(r);function _(t,e,a,s,n,i,o){try{var r=t[i](o),c=r.value}catch(t){return void a(t)}r.done?e(c):Promise.resolve(c).then(s,n)}var l,d,v={name:"PrintInvoice",data:function(){return{master_item:[],list_item:[]}},methods:{show:function(t,e){this.moment.locale("en"),this.$refs.print_invoice.open(),this.master_item=t,this.list_item=e},printHtml:(l=n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c()({printable:"section-to-print",type:"html",css:["https://fonts.googleapis.com/css?family=Battambang&display=swap","https://pks.siqware.com/css/main.css","https://pks.siqware.com/css/vuesax.css","https://pks.siqware.com/css/app.css"]});case 1:case"end":return t.stop()}}),t)})),d=function(){var t=this,e=arguments;return new Promise((function(a,s){var n=l.apply(t,e);function i(t){_(n,a,s,i,o,"next",t)}function o(t){_(n,a,s,i,o,"throw",t)}i(void 0)}))},function(){return d.apply(this,arguments)})}},u=a("KHd+"),m=Object(u.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("sweet-modal",{ref:"print_invoice",attrs:{title:"Print Invoice",blocking:!0,width:t.mobilecheck()?"":"60%"}},[a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"pb-4",attrs:{id:"section-to-print"}},[a("div",{staticClass:"w-full"},[a("table",{staticClass:"w-full text-primary"},[a("tr",[a("td",[a("img",{staticStyle:{height:"100px",width:"250px"},attrs:{src:"images/ponlok-khmer-header.jpg",alt:"header"}})]),t._v(" "),a("td",{staticClass:"text-center pt-10"},[a("h4",{staticClass:"text-primary"},[a("u",[t._v("វិក័យបត្របង់ប្រាក់")])]),t._v(" "),a("h4",{staticClass:"text-primary"},[a("u",[t._v("Invoice")])])]),t._v(" "),a("td",{staticClass:"text-right text-dark"},[t.master_item.id?a("barcode",{staticClass:"d-inline",staticStyle:{display:"inline"},attrs:{tag:"img",value:t.master_item.id,height:70,options:{displayValue:!1}}},[t._v("\n                                Show this if the rendering fails.\n                            ")]):t._e(),t._v(" "),a("div",[t._v("លេខវិក័យបត្រ: "+t._s(t.master_item.id))])],1)])])]),t._v(" "),a("div",{staticClass:"vx-row mb-3 mt-3"},[a("div",{staticClass:"vx-col w-full"},[a("table",{staticClass:"w-full text-primary"},[a("tr",[a("td",{staticClass:"w-1/3 print:w-1/3"},[a("b",[t._v("ឈ្មោះ​​ ៖​ "+t._s(t.master_item.name))])]),t._v(" "),a("td",{staticClass:"w-1/3 print:w-1/3"},[a("b",[t._v("ឡាតាំង ៖ "+t._s(t.master_item.latin))])]),t._v(" "),a("td",{staticClass:"w-1/3 print:w-1/3"},[a("b",[t._v("ភេទ: "+t._s(t.master_item.gender))])])])])])]),t._v(" "),a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col w-full"},[a("table",{staticClass:"custom"},[a("tbody",[a("tr",[a("th",{staticClass:"custom"},[t._v("ល.រ")]),t._v(" "),a("th",{staticClass:"custom"},[t._v("រាយមុខសេវាកម្ម")]),t._v(" "),a("th",{staticClass:"custom"},[t._v("រយៈពេលបង់")]),t._v(" "),a("th",{staticClass:"custom"},[t._v("ចំនួនទឹកប្រាក់")]),t._v(" "),a("th",{staticClass:"custom"},[t._v("អ្នកទទូលបន្ទុក")]),t._v(" "),a("th",{staticClass:"custom"},[t._v("ចាប់ផ្ដើមពីថ្ងៃទី")]),t._v(" "),a("th",{staticClass:"custom"},[t._v("រហូតដល់ថ្ងៃទី")])]),t._v(" "),t._l(t.list_item,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"custom"},[t._v(t._s(s+1))]),t._v(" "),a("td",{staticClass:"custom"},[t._v(t._s(e.item))]),t._v(" "),a("td",{staticClass:"custom"},[t._v(t._s(e.term)+" ខែ")]),t._v(" "),a("td",{staticClass:"custom"},[t._v("$ "+t._s(e.balance))]),t._v(" "),a("td",{staticClass:"custom"},[t._v(t._s("គ្មានអ្នកទទួលបន្ទុក"===e.emp_name?"--":e.emp_name))]),t._v(" "),a("td",{staticClass:"custom"},[t._v(t._s(t.moment(e.date_pay).format("DD/MM/YYYY")))]),t._v(" "),a("td",{staticClass:"custom"},[t._v(t._s(t.moment(e.next_date_pay).subtract(1,"day").format("DD/MM/YYYY")))])])}))],2),t._v(" "),a("tfoot",[a("tr",[a("td",{staticClass:"text-right pt-3",attrs:{colspan:"7"}},[t._v("\n                                ម៉ោង "+t._s(t.moment().format("h:mm:ss A"))+" ថ្ងៃទី "+t._s(t.moment().format("D"))+" ខែ "+t._s(t.moment().format("M"))+" ឆ្នាំ "+t._s(t.moment().format("Y"))+"\n                            ")])]),t._v(" "),a("tr",[a("td",{staticClass:"text-right pt-3",attrs:{colspan:"7"}},[t._v("\n                                បេឡា\n                            ")])])])]),t._v(" "),a("table",{staticClass:"top-minus",staticStyle:{"margin-top":"-51px"}},[a("tr",[a("td",{staticClass:"pr-3"},[a("b",[t._v("ទឹកប្រាក់សរុប:")])]),t._v(" "),a("td",[t._v(t._s(t.$formatter.format(t.master_item.total)))]),t._v(" "),a("td",{staticClass:"pr-3"},[a("b",[t._v("បញ្ចុះតម្លៃ:")])]),t._v(" "),a("td",[t._v(t._s(t.master_item.discount)+" %")]),t._v(" "),a("td",{staticClass:"pr-3"},[a("b",[t._v("ទឹកប្រាក់ត្រូវបង់:")])]),t._v(" "),a("td",[t._v(t._s(t.$formatter.format(t.master_item.after)))])]),t._v(" "),a("tr",[a("td",{staticClass:"pr-3"},[a("b",[t._v("ទឹកប្រាក់ទទួល:")])]),t._v(" "),a("td",[t._v(t._s(t.$formatter.format(t.master_item.receive_balance)))]),t._v(" "),a("td",{staticClass:"pr-3"},[a("b",[t._v("ទឹកប្រាក់ជំពាក់:")])]),t._v(" "),a("td",[t._v(t._s(t.$formatter.format(t.master_item.due_balance)))])])])])]),t._v(" "),a("div",{staticClass:"vx-row mt-3"},[a("div",{staticClass:"vx-col w-full"},[a("table",[a("tr",[a("td",{staticClass:"text-danger"},[t._v("\n                                1: ទឹកប្រាក់បង់ហើយមិនអាចដកវិញបានទេ\n                            ")])]),t._v(" "),a("tr",[a("td",{staticClass:"text-danger"},[t._v("\n                                2: សូមរក្សាបង្កាន់ដៃបង់ប្រាក់ដើម្បីផ្ទៀងផ្ទាត់\n                            ")])]),t._v(" "),a("tr",[a("td",{staticClass:"text-danger"},[t._v("\n                                3: តម្លៃខាងលើ គឺសម្រាប់តែសេវាកម្មអប់រំប៉ុណ្ណោះ ចំពោះការគ្រោះថ្នាក់ជាយថាហេតុជាបន្ទុករបស់ មាតាបិតា ឬអាណាព្យាបាលសិស្ស\n                            ")])])])]),t._v(" "),a("div",{staticClass:"vx-col w-full mt-3"},[a("table",{staticClass:"text-primary"},[a("tr",[a("td",[a("b",[t._v("អាស័យដ្ឋាន:")])]),t._v(" "),a("td",[t._v("\n                                ភូមិ ក្បាលស្ពាន ២ សង្កាត់ ប៉ោយប៉ែត ក្រុង ប៉ោយប៉ែត ខេត្ត បន្ទាយមានជ័យ\n                            ")]),t._v(" "),a("td"),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[a("b",[t._v("លេខទូរស័ព្ទ:")])]),t._v(" "),a("td",[t._v("012 383 838 / 012 382 957 / 085 598 999")]),t._v(" "),a("td",[a("b",[t._v("អ៊ីម៉ែល:")]),t._v(" ponlokkhmerschool@gmail.com")])])])])])]),t._v(" "),a("vs-divider"),t._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[a("vs-button",{attrs:{icon:"icon-printer","icon-pack":"feather",type:"relief"},on:{click:t.printHtml}},[t._v("បោះពុម្ភ")])],1)],1)],1)}),[],!1,null,"6527630c",null).exports;function p(t,e,a,s,n,i,o){try{var r=t[i](o),c=r.value}catch(t){return void a(t)}r.done?e(c):Promise.resolve(c).then(s,n)}function h(t){return function(){var e=this,a=arguments;return new Promise((function(s,n){var i=t.apply(e,a);function o(t){p(i,s,n,o,r,"next",t)}function r(t){p(i,s,n,o,r,"throw",t)}o(void 0)}))}}var f,y,b={name:"DueHistory",components:{flatPickr:o.a},data:function(){return{date_reduce_due:null,pay_due:0,student_id:null,desc:"",invoice_id:null,total_due:0}},computed:{get_dueHistory:function(){return this.$store.getters.get_due_histories},get_SumRow:function(){var t=0;return this.get_dueHistory.map((function(e){t+=parseFloat(e.pay_due)})),t}},methods:{preFixZero:function(t,e){for(var a=""+t;a.length<e;)a="0"+a;return a},show:(y=h(n.a.mark((function t(e,a,s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(s),this.total_due=-1*a,this.invoice_id=e,this.student_id=s,this.$refs.due_history.open(),t.next=7,this.$store.dispatch("fetchDueHistoryOnly",e);case 7:this.total_due-=this.get_SumRow;case 8:case"end":return t.stop()}}),t,this)}))),function(t,e,a){return y.apply(this,arguments)}),storeDueHistory:(f=h(n.a.mark((function t(){var e;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null!==(e=this).date_reduce_due||e.pay_due>0)){t.next=7;break}return e.$vs.loading({type:"material"}),t.next=5,e.$store.dispatch("updateIncrementDue",{id:e.student_id,due:e.pay_due});case 5:return t.next=7,e.$store.dispatch("storeDueHistory",{invoice_id:e.invoice_id,date_reduce_due:e.date_reduce_due,pay_due:e.pay_due,desc:e.desc}).then((function(t){t&&(e.$vs.loading.close(),e.pay_due=0)}));case 7:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})}},x=Object(u.a)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("sweet-modal",{ref:"due_history",attrs:{title:"ទូទាត់ការជំពាក់",blocking:!0,width:t.mobilecheck()?"":"90%"}},[a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"w-1/2 mb-3"},[a("h5",[t._v("លេខវិក័យបត្រ: "),a("b",[t._v(t._s(t.preFixZero(t.invoice_id,7)))]),t._v("  ប្រាក់នៅជំពាក់:​ "),a("b",[t._v(t._s(t.$formatter.format(t.total_due)))])])]),t._v(" "),a("div",{staticClass:"flex"},[a("div",{staticClass:"w-1/2 mr-2"},[a("flat-pickr",{staticClass:"w-full mr-2",attrs:{placeholder:"ថ្ងៃបង់លុយ"},model:{value:t.date_reduce_due,callback:function(e){t.date_reduce_due=e},expression:"date_reduce_due"}})],1),t._v(" "),a("div",{staticClass:"w-1/2 mr-2"},[a("vs-input-number",{attrs:{label:"សាច់ប្រាក់សង $:",mix:"0",max:t.total_due,"icon-inc":"expand_less","icon-dec":"expand_more"},model:{value:t.pay_due,callback:function(e){t.pay_due=e},expression:"pay_due"}})],1)]),t._v(" "),a("div",{staticClass:"w-full mt-3"},[a("vs-textarea",{attrs:{label:"Note"},model:{value:t.desc,callback:function(e){t.desc=e},expression:"desc"}})],1),t._v(" "),a("vs-table",{attrs:{data:t.get_dueHistory},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,(function(e,n){return a("vs-tr",{key:n,attrs:{data:e}},[a("vs-td",{attrs:{data:n}},[t._v("\n                        "+t._s(n+1)+"\n                    ")]),t._v(" "),a("vs-td",{attrs:{data:s[n].pay_due}},[t._v("\n                        "+t._s(t.$formatter.format(s[n].pay_due))+"\n                    ")]),t._v(" "),a("vs-td",{attrs:{data:s[n].desc}},[t._v("\n                        "+t._s(s[n].desc)+"\n                    ")]),t._v(" "),a("vs-td",{attrs:{data:s[n].date_reduce_due}},[t._v("\n                        "+t._s(s[n].date_reduce_due)+"\n                    ")])],1)}))}}])},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"indextr"}},[t._v("ល.រ")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"pay_due"}},[t._v("ចំនូនសង")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"desc"}},[t._v("ពិពណ៌នា")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"date_reduce_due"}},[t._v("ថ្ងៃទីសង")])],1)],2),t._v(" "),a("vs-divider"),t._v(" "),a("div",{staticClass:"flex justify-end btn-group"},[t.total_due>0?a("vs-button",{attrs:{icon:"icon-printer","icon-pack":"feather",type:"relief"},on:{click:t.storeDueHistory}},[t._v("សងលុយ")]):t._e()],1)],1)],1)}),[],!1,null,"78c2adda",null).exports;function g(t,e,a,s,n,i,o){try{var r=t[i](o),c=r.value}catch(t){return void a(t)}r.done?e(c):Promise.resolve(c).then(s,n)}function w(t){return function(){var e=this,a=arguments;return new Promise((function(s,n){var i=t.apply(e,a);function o(t){g(i,s,n,o,r,"next",t)}function r(t){g(i,s,n,o,r,"throw",t)}o(void 0)}))}}var D,k,C,$,S,Y,F,I={name:"Payment",components:{flatPickr:o.a,PrintInvoice:m,DueHistory:x},computed:{all_students:function(){return this.$store.getters.all_students},student_options:function(){return this.all_students.map((function(t){return{id:t.id,name:t.name,latin:t.latin,label_data:"".concat(t.name,"-").concat(t.latin,"-").concat(t.gender,"-").concat(t.dob),gender:t.gender,dob:t.dob,photo:t.photo,balance:t.balance,discount:t.discount}}))},getPayments:function(){return this.$store.getters.get_payments},getInvoicePayments:function(){return this.$store.getters.get_invoice_payments},getInvoiceDetailPayments:function(){return this.$store.getters.get_invoice_detail_payments},totalPayment:function(){for(var t=0,e=this.all_infos,a=0;a<e.length;a++)t+=parseFloat(e[a].term_selected);return this.total_payment=t,this.after_discount=t,t},getCurYear:function(){return this.$store.getters.get_cur_year},getInvoices:function(){return this.$store.getters.get_invoices},getInvoicesDetail:function(){return this.$store.getters.get_invoice_details},returnBalance:function(){var t=0;return this.after_discount<=this.rec_balance&&(t=this.rec_balance-this.after_discount),this.ret_balance=t,t},dueBalance:function(){var t=0;return this.after_discount>=this.rec_balance&&(t=this.rec_balance-this.after_discount),this.due_balance=t,t}},data:function(){return{discount:0,after_discount:0,cash_discount:0,rec_balance:0,due_balance:0,ret_balance:0,default_discount:0,users:[],selected:[],students:{label_data:"ជ្រើសរើសសិស្ស",gender:"ភេទ",dob:"ថ្ងៃខែឆ្នាំកំណើត",photo:"images/placeholder/placeholder.png"},student_id:"",gender:"",dob:null,balance:0,photo:"https://data.whicdn.com/images/300580381/original.jpg",id:0,name:"",latin:"",all_infos:[],total_payment:0,today_date:this.moment().format("YYYY-MM-DD"),edit_all_infos:[],edit_student_info:"",temp_para:[],val:1,activePrompt:!1}},methods:{preFixZero:function(t,e){for(var a=""+t;a.length<e;)a="0"+a;return a},cashDiscount:function(){this.discount=parseFloat(100*this.cash_discount/this.total_payment).toFixed(2),this.after_discount=this.total_payment-this.cash_discount},percentDiscount:function(){this.cash_discount=parseFloat(this.total_payment*this.discount/100).toFixed(2),this.after_discount=this.total_payment-this.cash_discount},getCostOne:function(t,e,a){var s=t,n=this.moment(e).add("month",1).format("YYYY-MM-DD");if(n>this.all_infos[a].last_date_pay){this.all_infos[a].next_date_pay=this.all_infos[a].last_date_pay;var i=this.moment(e),o=this.moment(this.all_infos[a].last_date_pay).diff(i,"days");s=(parseFloat(t)/30*o).toFixed()}else this.all_infos[a].next_date_pay=n;return this.all_infos[a].term_selected=s,s},getCostThree:function(t,e,a){var s=t,n=this.moment(e).add("month",3).format("YYYY-MM-DD");if(n>this.all_infos[a].last_date_pay){this.all_infos[a].next_date_pay=this.all_infos[a].last_date_pay;var i=this.moment(e),o=this.moment(this.all_infos[a].last_date_pay).diff(i,"days");s=(parseFloat(t)/91.25*o).toFixed(2)}else this.all_infos[a].next_date_pay=n;return this.all_infos[a].term_selected=s,s},getCostSix:function(t,e,a){var s=t,n=this.moment(e).add("months",6).format("YYYY-MM-DD");if(n>this.all_infos[a].last_date_pay){this.all_infos[a].next_date_pay=this.all_infos[a].last_date_pay;var i=this.moment(e),o=this.moment(this.all_infos[a].last_date_pay).diff(i,"days");s=(parseFloat(t)/182.5*o).toFixed(2)}else this.all_infos[a].next_date_pay=n;return this.all_infos[a].term_selected=s,s},getCostTwelve:function(t,e,a){var s=t,n=this.moment(e).add("months",12).subtract().format("YYYY-MM-DD");if(n>this.all_infos[a].last_date_pay){this.all_infos[a].next_date_pay=this.all_infos[a].last_date_pay;var i=this.moment(e),o=this.moment(this.all_infos[a].last_date_pay).diff(i,"days");s=(parseFloat(t)/365*o).toFixed(2)}else this.all_infos[a].next_date_pay=n;return this.all_infos[a].term_selected=s,s},getServiceStudy:(F=w(n.a.mark((function t(e){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=this).all_infos=[],t.next=4,this.$store.dispatch("fetchPayments",e);case 4:this.getPayments.services.map(function(){var t=w(n.a.mark((function t(e){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:0===e.services.employee_id?a.all_infos.push({year:e.year,service_id:e.id,name:e.services.service,date_pay:e.date_pay,next_date_pay:null,last_date_pay:e.last_date_pay,last_term:e.last_term,cost_one:e.services.cost_one,cost_three:e.services.cost_three,cost_six:e.services.cost_six,cost_twelve:e.services.cost_twelve,is_used:e.is_used,term_selected:0,employee_name:"គ្មានអ្នកទទួលបន្ទុក"}):a.all_infos.push({year:e.year,service_id:e.id,name:e.services.service,date_pay:e.date_pay,next_date_pay:null,last_date_pay:e.last_date_pay,last_term:e.last_term,cost_one:e.services.cost_one,cost_three:e.services.cost_three,cost_six:e.services.cost_six,cost_twelve:e.services.cost_twelve,is_used:e.is_used,term_selected:0,employee_name:e.services.employees.kh_name});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.getPayments.studies.map(function(){var t=w(n.a.mark((function t(e){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:0===e.study_infos.employee_id?a.all_infos.push({year:e.year,study_id:e.id,name:e.study_infos.level+""+e.study_infos.class_name,date_pay:e.date_pay,next_date_pay:null,last_date_pay:e.last_date_pay,last_term:e.last_term,cost_one:e.study_infos.cost_one,cost_three:e.study_infos.cost_three,cost_six:e.study_infos.cost_six,cost_twelve:e.study_infos.cost_twelve,is_used:e.is_used,term_selected:0,employee_name:"គ្មានអ្នកទទួលបន្ទុក"}):a.all_infos.push({year:e.year,study_id:e.id,name:e.study_infos.level+""+e.study_infos.class_name,date_pay:e.date_pay,next_date_pay:null,last_date_pay:e.last_date_pay,last_term:e.last_term,cost_one:e.study_infos.cost_one,cost_three:e.study_infos.cost_three,cost_six:e.study_infos.cost_six,cost_twelve:e.study_infos.cost_twelve,is_used:e.is_used,term_selected:0,employee_name:e.study_infos.employees.kh_name});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:case"end":return t.stop()}}),t,this)}))),function(t){return F.apply(this,arguments)}),passStudentInfo:function(){this.selected=[],this.all_infos=[],this.student_id=this.students.id,this.gender=this.students.gender,this.dob=this.students.dob,this.photo=this.students.photo,this.name=this.students.name,this.latin=this.students.latin,this.balance=this.students.balance,this.default_discount=this.students.discount,this.getServiceStudy({id:this.students.id,cur_year:this.getCurYear})},updateStudyInfo:(Y=w(n.a.mark((function t(e){var a,s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this,this.$vs.loading({type:"material"}),s=e.map(function(){var t=w(n.a.mark((function t(e){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.$store.dispatch("updateStudyInfo",e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=5,Promise.all(s).then((function(){a.$vs.notify({title:"ប្រតិបត្តិការណ៍ជោគជ័យ",text:"ទិន្នន័យឆ្នាំសិក្សាត្រូវកែប្រែ!",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),a.$vs.loading.close()}));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return Y.apply(this,arguments)}),updateServiceInfo:(S=w(n.a.mark((function t(e){var a,s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this,this.$vs.loading({type:"material"}),s=e.map(function(){var t=w(n.a.mark((function t(e){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.$store.dispatch("updateServiceInfo",e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=5,Promise.all(s).then((function(){a.$vs.notify({title:"ប្រតិបត្តិការណ៍ជោគជ័យ",text:"ទិន្នន័យសេវាកម្ម​​ត្រូវកែប្រែ!",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),a.$vs.loading.close()}));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return S.apply(this,arguments)}),storeInvoice:($=w(n.a.mark((function t(){var e,a,s,i,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.$vs.loading({type:"material"}),e=this,a=this.all_infos,s=[],i=[],o=0;o<a.length;o++)void 0===a[o].study_id?i.push({id:a[o].service_id,date_pay:a[o].next_date_pay,last_term:a[o].last_term,last_date_pay:a[o].last_date_pay,is_used:a[o].is_used}):s.push({id:a[o].study_id,date_pay:a[o].next_date_pay,last_term:a[o].last_term,year:a[o].year,last_date_pay:a[o].last_date_pay,from_class:null,to_class:null,date_change:null,is_used:!0});return s.length&&this.updateStudyInfo(s),i.length&&this.updateServiceInfo(i),t.next=10,this.$store.dispatch("updateIncrementDue",{id:this.student_id,due:this.due_balance});case 10:return t.next=12,e.$store.dispatch("storeInvoice",{student_id:this.student_id,invoice_date:this.today_date,balance:this.total_payment,after_discount:this.after_discount,discount:this.discount,payment_status:!1,due_balance:this.due_balance,receive_balance:this.rec_balance,return_balance:this.ret_balance}).then((function(t){if(t){var a=[];e.all_infos.map(function(){var s=w(n.a.mark((function s(i){return n.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a.push({invoice_id:t.id,item:i.name,term:i.last_term,balance:i.term_selected,date_pay:i.date_pay,next_date_pay:i.next_date_pay,emp_name:i.employee_name}),s.next=3,e.$store.dispatch("storeInvoiceDetail",{invoice_id:t.id,item:i.name,term:i.last_term,balance:i.term_selected,date_pay:i.date_pay,next_date_pay:i.next_date_pay,emp_name:i.employee_name});case 3:case"end":return s.stop()}}),s)})));return function(t){return s.apply(this,arguments)}}()),e.$vs.notify({title:"ប្រតិបត្តិការណ៍ជោគជ័យ",text:"ទិន្នន័យត្រូវបានរក្សាទុក",color:"primary",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$vs.loading.close(),e.$refs.PrintInvoice.show({id:e.preFixZero(a[0].invoice_id,7),name:e.name,latin:e.latin,gender:e.gender,total:e.total_payment,after:e.after_discount,discount:e.discount,due_balance:e.due_balance,receive_balance:e.rec_balance},a)}}));case 12:this.discount=0,this.cash_discount=0,this.all_infos=[];case 15:case"end":return t.stop()}}),t,this)}))),function(){return $.apply(this,arguments)}),removeItem:function(t){this.all_infos.splice(t,1)},showInvoiceDetail:(C=w(n.a.mark((function t(e){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.$modal.show("show-invoice-detail"),t.next=3,this.$store.dispatch("showInvoiceDetail",e);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return C.apply(this,arguments)}),printInvoice:(k=w(n.a.mark((function t(e,a,s,i,o,r,c,_,l){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("showInvoiceDetail",e);case 2:this.$refs.PrintInvoice.show({id:e,name:a,latin:s,gender:i,total:o,after:r,discount:c,due_balance:_,receive_balance:l},this.getInvoicesDetail);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e,a,s,n,i,o,r,c){return k.apply(this,arguments)}),dueHistory:function(t,e,a){this.$refs.DueHistory.show(t,e,a)},deleteInvoice:(D=w(n.a.mark((function t(){var e,a,s,i,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("fetchInvoicePayment",this.temp_para);case 2:return t.next=4,this.$store.dispatch("fetchInvoiceDetailPayment",this.temp_para);case 4:return t.next=6,this.$store.dispatch("updateDecrementDue",{id:this.temp_para.stu_id,due:this.temp_para.due});case 6:for(e=null,"2"===this.val&&(e=this.getInvoiceDetailPayments[0].date_pay,console.log(e)),a=this.all_infos,s=[],i=[],o=0;o<a.length;o++)void 0===a[o].study_id?i.push({id:a[o].service_id,date_pay:e,last_term:a[o].last_term,last_date_pay:a[o].last_date_pay,is_used:a[o].is_used}):s.push({id:a[o].study_id,date_pay:e,last_term:a[o].last_term,year:a[o].year,last_date_pay:a[o].last_date_pay,from_class:null,to_class:null,date_change:null,is_used:!0});console.log(s),console.log(i),s.length&&this.updateStudyInfo(s),i.length&&this.updateServiceInfo(i),this.$store.dispatch("deleteInvoice",this.temp_para.inv_id);case 17:case"end":return t.stop()}}),t,this)}))),function(){return D.apply(this,arguments)}),confirmDeleted:function(t){this.temp_para=t,this.getServiceStudy({id:t.stu_id,cur_year:this.getCurYear}),this.$vs.dialog({type:"confirm",color:"danger",title:"លុបវិក័យបត្រក្នុងឆ្នាំ "+this.getCurYear,text:"ចុចពាក្យ Accept ដើម្បីលុបទិន្នន័យ!",accept:this.deleteInvoice})},deletedelete:function(t){this.temp_para=t,this.getServiceStudy({id:t.stu_id,cur_year:this.getCurYear}),this.activePrompt=!0},close:function(){this.$vs.notify({color:"danger",title:"Closed",text:"You close a dialog!"})}}},P=Object(u.a)(I,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vx-card",{attrs:{"no-shadow":""}},[a("div",{staticClass:"flex btn-group"},[a("vs-button",{attrs:{type:"relief","icon-pack":"feather",icon:"icon-plus-square"},on:{click:function(e){return t.$refs.add_payment.open()}}},[t._v("\n            បង់លុយ\n        ")])],1),t._v(" "),a("vs-table",{attrs:{pagination:"","max-items":"5",search:"",data:t.getInvoices},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},[a("vs-td",{attrs:{data:e.id}},[t._v("\n                    "+t._s(t.preFixZero(e.id,7))+"\n                ")]),t._v(" "),a("vs-td",{attrs:{data:e.student_id}},[t._v("\n                    "+t._s(e.student_id)+"\n                ")]),t._v(" "),a("vs-td",{attrs:{data:e.name}},[t._v("\n                    "+t._s(e.name)+"\n                ")]),t._v(" "),a("vs-td",{attrs:{data:e.latin}},[t._v("\n                    "+t._s(e.latin)+"\n                ")]),t._v(" "),a("vs-td",{attrs:{data:e.balance}},[t._v("\n                    $ "+t._s(e.balance)+"\n                ")]),t._v(" "),a("vs-td",{attrs:{data:e.discount}},[t._v("\n                    "+t._s(e.discount)+" %\n                ")]),t._v(" "),a("vs-td",{attrs:{data:e.after_discount}},[t._v("\n                    $ "+t._s(e.after_discount)+"\n                ")]),t._v(" "),a("vs-td",{attrs:{data:e.due_balance}},[t._v("\n                    $ "+t._s(e.due_balance)+"\n                ")]),t._v(" "),a("vs-td",{attrs:{data:e.invoice_date}},[t._v("\n                    "+t._s(t.moment(e.invoice_date).format("DD/MM/YYYY"))+"\n                ")]),t._v(" "),!0===e.payment_status?a("vs-td",[a("vs-chip",{attrs:{color:"success"}},[a("span",[t._v("បានទទូល")])])],1):a("vs-td",[a("vs-chip",{attrs:{color:"danger"}},[a("span",[t._v("មិនទាន់ទទូល")])])],1),t._v(" "),a("vs-td",[a("div",{staticClass:"btn-group"},[a("vs-button",{attrs:{size:"small",color:"success",type:"line","icon-pack":"feather",icon:"icon-eye"},on:{click:function(a){return t.showInvoiceDetail(e.id)}}},[t._v(" លម្អិត\n                        ")]),t._v(" "),a("vs-button",{attrs:{size:"small",color:"primary",type:"line","icon-pack":"feather",icon:"icon-printer"},on:{click:function(a){t.printInvoice(t.preFixZero(e.id,7),e.name,e.latin,e.gender,e.balance,e.after_discount,e.discount,e.due_balance,e.receive_balance)}}},[t._v(" បោះពុម្ភ\n                        ")]),t._v(" "),a("vs-button",{attrs:{size:"small",color:"success",type:"line","icon-pack":"feather",icon:"icon-dollar-sign"},on:{click:function(a){return t.dueHistory(e.id,e.due_balance,e.student_id)}}},[t._v(" ទូទាត់ប្រាក់\n                        ")]),t._v(" "),a("vs-button",{attrs:{size:"small",color:"primary",type:"line","icon-pack":"feather",icon:"icon-edit"},on:{click:function(a){return t.deletedelete({inv_id:e.id,stu_id:e.student_id,due:e.due_balance})}}},[t._v(" Rollback\n                        ")])],1)])],1)}))}}])},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"id"}},[t._v("លេខវិក័យបត្រ")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"student_id"}},[t._v("អត្តលេខសិស្ស")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"name"}},[t._v("ឈ្មោះសិស្ស")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"latin"}},[t._v("ឈ្មោះឡាតាំង")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"balance"}},[t._v("តម្លៃដើម")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"discount"}},[t._v("បញ្ចុះតម្លៃ")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"after_discount"}},[t._v("តម្លៃត្រូវបង់")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"due_balance"}},[t._v("ជំពាក់")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"invoice_date"}},[t._v("ថ្ងៃបង់លុយ")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"payment_status"}},[t._v("បានទទូល")]),t._v(" "),a("vs-th",[t._v("ប្រតិបត្តិការណ៌")])],1)],2),t._v(" "),a("modal",{attrs:{width:"60%",height:"auto",scrollable:!0,pivotY:.07,adaptive:!0,clickToClose:!1,name:"show-invoice-detail"}},[a("div",{staticClass:"flex justify-end"},[a("i",{staticClass:"vs-icon vs-popup--close material-icons text-warning",staticStyle:{background:"rgb(255, 255, 255)"},on:{click:function(e){return t.$modal.hide("show-invoice-detail")}}},[t._v("close")])]),t._v(" "),a("vx-card",{attrs:{"no-shadow":""}},[a("vs-table",{attrs:{data:t.getInvoicesDetail},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},[a("vs-td",{attrs:{data:s}},[t._v("\n                            "+t._s(s+1)+"\n                        ")]),t._v(" "),a("vs-td",{attrs:{data:e.item}},[t._v("\n                            "+t._s(e.item)+"\n                        ")]),t._v(" "),a("vs-td",{attrs:{data:e.term}},[t._v("\n                            "+t._s(e.term)+" ខែ\n                        ")]),t._v(" "),a("vs-td",{attrs:{data:e.balance}},[t._v("\n                            $ "+t._s(e.balance)+"\n                        ")]),t._v(" "),a("vs-td",{attrs:{data:e.date_pay}},[t._v("\n                            "+t._s(t.moment(e.date_pay).format("DD/MM/YYYY"))+"\n                        ")]),t._v(" "),a("vs-td",{attrs:{data:e.next_date_pay}},[t._v("\n                            "+t._s(t.moment(e.next_date_pay).subtract(1,"day").format("DD/MM/YYYY"))+"\n                        ")])],1)}))}}])},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"index"}},[t._v("ល.រ")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"item"}},[t._v("ប្រភេទត្រូវបង់")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"term"}},[t._v("រយៈពេលបង់")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"balance"}},[t._v("តម្លៃ")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"created_at"}},[t._v("ថ្ងៃបង់លុយ")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"created_at"}},[t._v("ថ្ងៃបង់បន្ទាប់")])],1)],2),t._v(" "),a("vs-divider")],1)],1),t._v(" "),a("sweet-modal",{ref:"add_payment",attrs:{title:"ការបង់លុយ",blocking:!0,width:t.mobilecheck()?"":"100%"}},[a("div",{staticClass:"vx-row"},[a("div",{staticClass:"vx-col md:w-5/6"},[a("v-select",{staticClass:"w-full",attrs:{clearable:!1,placeholder:"ជ្រើសរើសឈ្មោះសិស្ស",options:t.student_options,label:"label_data"},on:{input:t.passStudentInfo},model:{value:t.students,callback:function(e){t.students=e},expression:"students"}})],1),t._v(" "),a("div",{staticClass:"vx-col md:w-1/6"},[a("flat-pickr",{staticClass:"w-full",attrs:{placeholder:"ថ្ងៃបង់លុយ"},model:{value:t.today_date,callback:function(e){t.today_date=e},expression:"today_date"}})],1)]),t._v(" "),a("div",{staticClass:"vx-row mt-base mb-base"},[a("div",{staticClass:"vx-col md:w-1/5 w-full"},[a("img",{staticClass:"shadow-md",attrs:{alt:"",height:"150",src:t.students.photo}})])]),t._v(" "),a("h3",{staticClass:"mb-10"},[t._v("បញ្ចុះតម្លៃ "+t._s(t.default_discount)+"%")]),t._v(" "),a("vs-table",{attrs:{data:t.all_infos},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.data;return t._l(s,(function(e,s){return a("vs-tr",{key:s,attrs:{data:e}},[a("vs-td",{attrs:{data:e.year}},[t._v("\n                        "+t._s(e.year)+"\n                    ")]),t._v(" "),a("vs-td",{attrs:{data:e.name}},["01"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#01579B"}},[a("b",[t._v(t._s(e.name))])]):"02"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#E91E63"}},[a("b",[t._v(t._s(e.name))])]):"03"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#880E4F"}},[a("b",[t._v(t._s(e.name))])]):"04"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#AA00FF"}},[a("b",[t._v(t._s(e.name))])]):"05"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#3F51B5"}},[a("b",[t._v(t._s(e.name))])]):"06"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#26C6DA"}},[a("b",[t._v(t._s(e.name))])]):"07"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#80D8FF"}},[a("b",[t._v(t._s(e.name))])]):"08"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#C0CA33"}},[a("b",[t._v(t._s(e.name))])]):"09"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#689F38"}},[a("b",[t._v(t._s(e.name))])]):"10"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#2E7D32"}},[a("b",[t._v(t._s(e.name))])]):"11"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#FF9800"}},[a("b",[t._v(t._s(e.name))])]):"12"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#FFEE58"}},[a("b",[t._v(t._s(e.name))])]):"13"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#4E342E"}},[a("b",[t._v(t._s(e.name))])]):"14"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#FFFF00"}},[a("b",[t._v(t._s(e.name))])]):"15"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#64DD17"}},[a("b",[t._v(t._s(e.name))])]):"16"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#1B5E20"}},[a("b",[t._v(t._s(e.name))])]):"17"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#66BB6A"}},[a("b",[t._v(t._s(e.name))])]):"18"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#00E5FF"}},[a("b",[t._v(t._s(e.name))])]):"19"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#006064"}},[a("b",[t._v(t._s(e.name))])]):"20"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#81D4FA"}},[a("b",[t._v(t._s(e.name))])]):"21"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#26A69A"}},[a("b",[t._v(t._s(e.name))])]):"22"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#B388FF"}},[a("b",[t._v(t._s(e.name))])]):"23"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#FF4081"}},[a("b",[t._v(t._s(e.name))])]):"24"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#B71C1C"}},[a("b",[t._v(t._s(e.name))])]):"25"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#009688"}},[a("b",[t._v(t._s(e.name))])]):"26"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#00BCD4"}},[a("b",[t._v(t._s(e.name))])]):"27"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#1DE9B6"}},[a("b",[t._v(t._s(e.name))])]):"28"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#2E7D32"}},[a("b",[t._v(t._s(e.name))])]):"29"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#C6FF00"}},[a("b",[t._v(t._s(e.name))])]):"30"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#64DD17"}},[a("b",[t._v(t._s(e.name))])]):"31"===t.moment(e.date_pay).format("DD")?a("span",{staticStyle:{color:"#795548"}},[a("b",[t._v(t._s(e.name))])]):a("span",{staticStyle:{color:"#6A1B9A"}},[a("b",[t._v(t._s(e.name))])])]),t._v(" "),a("vs-td",[a("vs-select",{staticClass:"w-full",attrs:{autocomplete:"",placeholder:"ជ្រើសរើសរយៈពេល"},model:{value:e.last_term,callback:function(a){t.$set(e,"last_term",a)},expression:"tr.last_term"}},[a("vs-select-item",{attrs:{value:"1",text:"1"}}),t._v(" "),a("vs-select-item",{attrs:{value:"3",text:"3"}}),t._v(" "),a("vs-select-item",{attrs:{value:"6",text:"6"}}),t._v(" "),a("vs-select-item",{attrs:{value:"12",text:"12"}})],1)],1),t._v(" "),1===e.last_term||"1"===e.last_term?a("vs-td",[t._v("\n                        "+t._s(t.getCostOne(e.cost_one,e.date_pay,s))+"\n                    ")]):t._e(),t._v(" "),3===e.last_term||"3"===e.last_term?a("vs-td",[t._v("\n                        "+t._s(t.getCostThree(e.cost_three,e.date_pay,s))+"\n                    ")]):t._e(),t._v(" "),6===e.last_term||"6"===e.last_term?a("vs-td",[t._v("\n                        "+t._s(t.getCostSix(e.cost_six,e.date_pay,s))+"\n                    ")]):t._e(),t._v(" "),12===e.last_term||"12"===e.last_term?a("vs-td",[t._v("\n                        "+t._s(t.getCostTwelve(e.cost_twelve,e.date_pay,s))+"\n                    ")]):t._e(),t._v(" "),0===e.last_term?a("vs-td",[t._v("\n                        0\n                    ")]):t._e(),t._v(" "),null!==e.date_pay?a("vs-td",[a("flat-pickr",{staticClass:"w-full",attrs:{value:e.date_pay,placeholder:"ថ្ងៃត្រូវបង់លុយដំបូង"}})],1):a("vs-td",[a("flat-pickr",{staticClass:"w-full",attrs:{placeholder:"ថ្ងៃត្រូវបង់លុយដំបូង"},model:{value:e.date_pay,callback:function(a){t.$set(e,"date_pay",a)},expression:"tr.date_pay"}})],1),t._v(" "),a("vs-td",[a("flat-pickr",{staticClass:"w-full",attrs:{placeholder:"ថ្ងៃត្រូវបង់លុយដំបូង",disabled:""},model:{value:e.next_date_pay,callback:function(a){t.$set(e,"next_date_pay",a)},expression:"tr.next_date_pay"}})],1),t._v(" "),a("vs-td",[a("vs-button",{attrs:{radius:"",color:"danger",type:"relief","icon-pack":"feather",icon:"icon-trash"},on:{click:function(e){return t.removeItem(s)}}})],1)],1)}))}}])},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"year"}},[t._v("ឆ្នាំសិក្សា")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"name"}},[t._v("ប្រភេទត្រូវបង់")]),t._v(" "),a("vs-th",[t._v("រយៈពេលបង់")]),t._v(" "),a("vs-th",[t._v("តម្លៃ")]),t._v(" "),a("vs-th",{attrs:{"sort-key":"date_pay"}},[t._v("ថ្ងៃខែឆ្នាំត្រូវបង់")]),t._v(" "),a("vs-th",[t._v("ថ្ងៃខែឆ្នាំត្រូវបង់បន្ទាប់")]),t._v(" "),a("vs-th",[t._v("គ្រប់ឬនៅ")])],1)],2),t._v(" "),a("div",{staticClass:"centerx vx-row mt-10"},[a("div",{staticClass:"vx-col md:w-1/2"},[a("h3",[a("span",[t._v("តម្លៃសរុប: "),a("b",[t._v(t._s(t.$formatter.format(t.totalPayment))+"​ => "+t._s(t.$formatter.format(parseFloat(t.after_discount))))])])]),t._v(" "),a("div",{staticClass:"flex"},[a("div",{staticClass:"flex mt-5"},[a("vs-input-number",{attrs:{label:"បញ្ចុះភាគរយ %:",min:"0",max:"100","icon-inc":"expand_less","icon-dec":"expand_more"},on:{input:t.percentDiscount},model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}})],1),t._v(" "),a("div",{staticClass:"flex mt-5"},[a("vs-input-number",{attrs:{label:"បញ្ចុះជាសាច់ប្រាក់ $:",min:"0",max:t.total_payment,"icon-inc":"expand_less","icon-dec":"expand_more"},on:{input:t.cashDiscount},model:{value:t.cash_discount,callback:function(e){t.cash_discount=e},expression:"cash_discount"}})],1)])]),t._v(" "),a("div",{staticClass:"vx-col md:w-1/2"},[a("vs-divider",{attrs:{position:"left-center"}},[t._v("ទូទាត់សាច់ប្រាក់")]),t._v(" "),a("div",{staticClass:"flex"},[a("vs-input-number",{attrs:{label:"សាច់ប្រាក់ទទូល $:","icon-inc":"expand_less","icon-dec":"expand_more"},model:{value:t.rec_balance,callback:function(e){t.rec_balance=e},expression:"rec_balance"}})],1),t._v(" "),a("div",{staticClass:"flex"},[a("div",{staticClass:"flex "},[a("vs-input-number",{attrs:{label:"សាច់ប្រាក់ជំពាក់ $:",disabled:"","icon-inc":"expand_less","icon-dec":"expand_more"},model:{value:t.dueBalance,callback:function(e){t.dueBalance=e},expression:"dueBalance"}})],1),t._v(" "),a("div",{staticClass:"flex "},[a("vs-input-number",{attrs:{label:"សាច់ប្រាក់អាប់ $:",disabled:"","icon-inc":"expand_less","icon-dec":"expand_more"},model:{value:t.returnBalance,callback:function(e){t.returnBalance=e},expression:"returnBalance"}})],1)])],1)]),t._v(" "),t.all_infos.length?a("vs-button",{attrs:{slot:"button"},on:{click:t.storeInvoice},slot:"button"},[t._v("បង់លុយ")]):t._e()],1),t._v(" "),a("print-invoice",{ref:"PrintInvoice"}),t._v(" "),a("due-history",{ref:"DueHistory"}),t._v(" "),a("vs-prompt",{attrs:{active:t.activePrompt},on:{cancel:function(e){t.val=1},accept:t.deleteInvoice,close:t.close,"update:active":function(e){t.activePrompt=e}}},[a("div",{staticClass:"con-exemple-prompt"},[a("span",[t._v("Select condition!")]),t._v(" "),a("vs-select",{staticClass:"w-full",attrs:{autocomplete:"",placeholder:"ជ្រើសរើសលក្ខ័ណ"},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}},[a("vs-select-item",{attrs:{value:"1",text:"Rollback to NULL Date"}}),t._v(" "),a("vs-select-item",{attrs:{value:"2",text:"Rollback to last Payment Date"}})],1),t._v(" "),a("h6",{staticClass:"text-danger mt-2"},[t._v("ចំណាំមិនអាច RollBack ចំពោះវិក័យបត្រដែលបានទូទាត់ការជំពាក់បានទេ")])],1)])],1)}),[],!1,null,"648c18f2",null);e.default=P.exports}}]);